name: Auto Merge to Production and Deploy

on:
  schedule:
    - cron: '*/5 * * * *'

jobs:
  merge_and_deploy:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4
      with:
          token: ${{ secrets.GIT_ACCESS_TOKEN }}

    - name: Automatic Merge
      run: |
        git config user.name "github-actions"
        git config user.email "github-actions@github.com"
        git fetch --all
        git branch
        git checkout production
        git pull
        git merge main
        git push origin production
